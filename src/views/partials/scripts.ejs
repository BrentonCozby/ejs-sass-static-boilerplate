<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
<% if(filenameMap) { %>
<script src="<%= PP %>js/<%= filenameMap['common.js'] %>"></script>
<script src="<%= PP %>js/<%= filenameMap['bundle.js'] %>"></script>
<% } else { %>
<script src="<%= PP %>js/common.js"></script>
<script src="<%= PP %>js/bundle.js"></script>
<% } %>

<% if(NODE_ENV === 'production') { %>
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('<%= PP %>service-worker.js').then(function(registration) {
                // Registration was successful
                  console.log('ServiceWorker registration successful with scope: ', registration.scope);
            });
        }, function(err) {
          // registration failed :(
          console.log('ServiceWorker registration failed: ', err);
        })
    }
</script>
<% } %>

<% if(GOOGLE_ANALYTICS_ID) { %>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
    function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='https://www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','<%= GOOGLE_ANALYTICS_ID %>','auto');ga('send','pageview');
</script>
<% } %>
